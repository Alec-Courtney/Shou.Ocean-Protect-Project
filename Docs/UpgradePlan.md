# 项目升级与优化计划

本文档旨在为“渔船离境智能预警系统”的未来发展提供一个清晰的路线图。以下是基于当前项目状态（V4.5）设计的三个主要优化方向。

---

### **优化计划 A：增强系统健壮性与可维护性**

**目标**：提升代码质量和系统的稳定性，为未来的功能迭代打下更坚实的基础。

1.  **后端代码重构与模块化**：
    *   **问题**：`server.py` 文件承担了过多的职责，包括API路由、WebSocket逻辑、数据库操作和业务逻辑调用，未来会变得难以维护。
    *   **方案**：将 `server.py` 拆分为多个模块。例如，可以创建一个 `api/` 目录，将不同的API路由（如 `boats.py`, `warnings.py`）分散到不同的文件中。将数据库辅助函数封装到一个更独立的 `database_utils.py` 模块中。
    *   **好处**：提高代码的可读性和模块化程度，方便团队协作和单元测试。

2.  **引入依赖管理工具**：
    *   **问题**：项目依赖目前仅在 `README.md` 中列出，需要手动 `pip install`，无法保证版本一致性。
    *   **方案**：在项目根目录创建一个 `requirements.txt` 文件，将所有Python依赖及其版本号（例如 `fastapi==0.100.0`）记录在内。用户只需运行 `pip install -r requirements.txt` 即可一键安装所有依赖。
    *   **好处**：确保开发和部署环境的一致性，避免因依赖版本不同导致的问题。

3.  **完善配置管理**：
    *   **问题**：代码中存在一些硬编码的常量（如 `WEBSOCKET_SEND_INTERVAL`）和路径。
    *   **方案**：将这些常量移入 `config.json` 文件，使系统行为完全由配置驱动。
    *   **好处**：无需修改代码即可调整系统参数，提高灵活性。

---

### **优化计划 B：提升用户体验与前端性能**

**目标**：改进前端的交互体验和视觉效果。

1.  **前端代码现代化与组件化**：
    *   **问题**：`main.js` 是一个庞大的单体文件，所有逻辑都混合在一起，难以扩展新功能。
    *   **方案**：引入一个轻量级的前端框架（如 **Vue.js** 或 **Svelte**），或者至少将 `main.js` 拆分为多个模块（例如 `map.js`, `api.js`, `ui.js`）。将UI元素（如船只列表项、预警卡片）抽象为可复用的组件。
    *   **好处**：极大提升前端代码的可维护性和可扩展性，为构建更复杂的UI界面做准备。

2.  **优化地图交互**：
    *   **问题**：当前地图交互功能相对基础。
    *   **方案**：增加更多的地图控件和功能，例如：
        *   **图层切换器**：允许用户在卫星图和街道图之间自由切换。
        *   **全屏按钮**：提供更好的沉浸式监控体验。
        *   **鼠标悬停高亮**：当鼠标悬停在船只列表或地图图标上时，对应元素高亮显示，增强联动性。
    *   **好处**：提升用户操作的便捷性和直观性。

---

### **优化计划 C：功能扩展与数据深度利用**

**目标**：为系统增加新的、有价值的功能。

1.  **开发船只管理后台**：
    *   **问题**：目前船只的添加和命名依赖于GPS模拟器或数据源上报，系统本身没有管理能力。
    *   **方案**：创建一个简单的后台管理页面，允许管理员手动添加、编辑（例如修改船名）、删除船只信息。
    *   **好处**：使船只信息管理更加系统化和可控。

2.  **引入数据分析与报表**：
    *   **问题**：系统已经存储了大量有价值的历史数据，但未能充分利用。
    *   **方案**：增加一个新的“数据分析”或“报表”页面，提供：
        *   **预警热力图**：在地图上展示历史预警发生最频繁的区域。
        *   **船只行为分析**：统计特定船只在一段时间内的平均速度、航行里程、预警次数等。
        *   **数据导出**：允许将查询到的历史轨迹或预警记录导出为CSV或Excel文件。
    *   **好处**：将存储的数据转化为有价值的洞察，提升系统的业务价值。
